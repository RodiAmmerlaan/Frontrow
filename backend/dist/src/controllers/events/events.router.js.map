{"version":3,"file":"events.router.js","sourceRoot":"","sources":["../../../../src/controllers/events/events.router.ts"],"names":[],"mappings":"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","sourcesContent":["import { Router } from 'express';\r\nimport { getAllEvents } from './getAllEvents.controller';\r\nimport { getEventById } from './getEventById.controller';\r\nimport { createEvent } from './createEvent.controller';\r\nimport { getSalesOverview } from './salesOverview.controller';\r\nimport { getUserPurchaseReport } from './userPurchaseReport.controller';\r\nimport { searchEvents } from './searchEvents.controller';\r\nimport { authenticate, authorizeAdmin } from '../../middleware/auth.middleware';\r\nimport { validateRequest, ValidationSchemas } from '../../middleware/validation.middleware';\r\nimport Joi from 'joi';\r\n\r\nconst createEventSchema = Joi.object({\r\n  title: Joi.string().min(1).max(100).required(),\r\n  description: Joi.string().min(1).max(1000).required(),\r\n  date: Joi.string().pattern(/^\\d{4}-\\d{2}-\\d{2}$/).required(),\r\n  start_time: Joi.string().pattern(/^\\d{2}:\\d{2}$/).required(),\r\n  end_time: Joi.string().pattern(/^\\d{2}:\\d{2}$/).required(),\r\n  total_tickets: Joi.number().integer().min(1).required(),\r\n  price: Joi.number().min(0).required()\r\n});\r\n\r\nconst eventIdSchema = Joi.object({\r\n  eventId: ValidationSchemas.uuid().required()\r\n});\r\n\r\nconst paginationSchema = Joi.object({\r\n  page: Joi.number().integer().min(1).optional(),\r\n  limit: Joi.number().integer().min(1).max(100).optional()\r\n});\r\n\r\nconst searchEventsSchema = Joi.object({\r\n  name: Joi.string().min(1).required()\r\n});\r\n\r\nconst reportSchema = Joi.object({\r\n  month: Joi.number().integer().min(1).max(12).optional(),\r\n  year: Joi.number().integer().min(2000).max(2100).optional()\r\n});\r\n\r\nexport const eventsRouter = Router();\r\n\r\neventsRouter.get(\"\", \r\n  validateRequest(paginationSchema, { source: 'query', sanitize: true }),\r\n  getAllEvents\r\n);\r\neventsRouter.get(\"/search\", \r\n  validateRequest(searchEventsSchema, { source: 'query', sanitize: true }),\r\n  searchEvents\r\n);\r\neventsRouter.post(\"/create\", \r\n  authenticate, \r\n  authorizeAdmin, \r\n  validateRequest(createEventSchema, { source: 'body', sanitize: true }),\r\n  createEvent\r\n);\r\neventsRouter.get(\"/sales-overview\", \r\n  authenticate, \r\n  authorizeAdmin,\r\n  validateRequest(reportSchema, { source: 'query', sanitize: true }),\r\n  getSalesOverview\r\n);\r\neventsRouter.get(\"/user-purchase-report\", \r\n  authenticate, \r\n  authorizeAdmin,\r\n  validateRequest(reportSchema, { source: 'query', sanitize: true }),\r\n  getUserPurchaseReport\r\n);\r\neventsRouter.get(\"/:eventId\", \r\n  validateRequest(eventIdSchema, { source: 'params', sanitize: true }),\r\n  getEventById\r\n);"]}