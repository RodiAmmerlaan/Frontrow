{"version":3,"file":"logout.controller.js","sourceRoot":"","sources":["../../../src/controllers/auth/logout.controller.ts"],"names":[],"mappings":";;;;;AAkDA,4CAoBC;AArED,8DAA0D;AAC1D,qCAAgE;AAChE,6DAAwD;AACxD,gEAAwC;AAExC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA2CG;AACI,KAAK,UAAU,gBAAgB,CAAC,OAAgB,EAAE,QAAkB;IACvE,MAAM,aAAa,GAAI,OAAe,CAAC,aAAa,IAAI,KAAK,CAAC;IAC9D,gBAAM,CAAC,KAAK,CAAC,IAAI,aAAa,4BAA4B,CAAC,CAAC;IAE5D,IAAI,CAAC;QACD,MAAM,GAAG,GAAG,IAAA,yBAAgB,EAAC,OAAO,CAAC,CAAC;QAEtC,IAAI,GAAG,EAAE,CAAC;YACN,MAAM,0BAAW,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;QACtC,CAAC;QAED,IAAA,2BAAkB,EAAC,QAAQ,CAAC,CAAC;QAC7B,gBAAM,CAAC,IAAI,CAAC,IAAI,aAAa,gCAAgC,CAAC,CAAC;QAC/D,OAAO,IAAA,2BAAW,EAAC,QAAQ,EAAE,EAAE,OAAO,EAAE,yBAAyB,EAAE,CAAC,CAAC;IACzE,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACb,gBAAM,CAAC,KAAK,CAAC,IAAI,aAAa,8BAA8B,EAAE,KAAK,CAAC,CAAC;QAErE,IAAA,2BAAkB,EAAC,QAAQ,CAAC,CAAC;QAC7B,OAAO,IAAA,2BAAW,EAAC,QAAQ,EAAE,EAAE,OAAO,EAAE,yBAAyB,EAAE,CAAC,CAAC;IACzE,CAAC;AACL,CAAC;AAAA,CAAC","sourcesContent":["import { Request, Response } from \"express\";\r\nimport { AuthService } from \"../../services/auth.service\";\r\nimport { clearRefreshCookie, getRefreshCookie } from \"./cookie\";\r\nimport { sendSuccess } from \"../../utils/response.util\";\r\nimport Logger from \"../../utils/logger\";\r\n\r\n/**\r\n * @openapi\r\n * /auth/logout:\r\n *   post:\r\n *     summary: User logout\r\n *     description: Logs out the current user by clearing their refresh token cookie\r\n *     tags:\r\n *       - Authentication\r\n *     security:\r\n *       - bearerAuth: []\r\n *     responses:\r\n *       200:\r\n *         description: Successful logout\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               type: object\r\n *               properties:\r\n *                 success:\r\n *                   type: boolean\r\n *                 data:\r\n *                   type: object\r\n *                   properties:\r\n *                     message:\r\n *                       type: string\r\n *         headers:\r\n *           Set-Cookie:\r\n *             description: Clear refresh token cookie\r\n *             schema:\r\n *               type: string\r\n *       500:\r\n *         description: Internal server error\r\n *         content:\r\n *           application/json:\r\n *             schema:\r\n *               type: object\r\n *               properties:\r\n *                 success:\r\n *                   type: boolean\r\n *                 error:\r\n *                   type: string\r\n *                 message:\r\n *                   type: string\r\n */\r\nexport async function logoutController(request: Request, response: Response) {\r\n    const correlationId = (request as any).correlationId || 'N/A';\r\n    Logger.debug(`[${correlationId}] Logout controller called`);\r\n    \r\n    try {\r\n        const raw = getRefreshCookie(request);\r\n        \r\n        if (raw) {\r\n            await AuthService.logoutUser(raw);\r\n        }\r\n        \r\n        clearRefreshCookie(response);\r\n        Logger.info(`[${correlationId}] User logged out successfully`);\r\n        return sendSuccess(response, { message: 'Logged out successfully' });\r\n    } catch (error) {\r\n        Logger.error(`[${correlationId}] Error in logoutController:`, error);\r\n\r\n        clearRefreshCookie(response);\r\n        return sendSuccess(response, { message: 'Logged out successfully' });\r\n    }\r\n};"]}